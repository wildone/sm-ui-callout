<link rel="import" href="../polymer/polymer.html"> <link rel="import" href="../sm-ui-core/sm-ui-core.html"> <dom-module id="sm-ui-callout"> <template> <style include="sm-css-shady"></style><style include="sm-css">:root{--callout-arrow-size:0.75rem}:host{position:relative;background:#fff;border-radius:var(--border-radius);box-shadow:var(--shadow);display:none}:host([visible]){display:block}:host::before{content:'';position:absolute;height:var(--callout-arrow-size);width:var(--callout-arrow-size);-webkit-transform:rotate(45deg);transform:rotate(45deg);background:inherit}:host ::content *{position:relative;z-index:1}:host([arrow*=top]){-webkit-transform:translateY(calc(var(--callout-arrow-size)/ 2));transform:translateY(calc(var(--callout-arrow-size)/ 2))}:host([arrow*=top])::before{top:calc(0px - var(--callout-arrow-size)/ 2);box-shadow:-1px -1px rgba(0,0,0,.075)}:host([arrow*=bottom]){-webkit-transform:translateY(calc(0 - var(--callout-arrow-size)/ 2));transform:translateY(calc(0 - var(--callout-arrow-size)/ 2))}:host([arrow*=bottom])::before{bottom:calc(0px - var(--callout-arrow-size)/ 2);box-shadow:1px 1px 1px rgba(0,0,0,.2)}:host([arrow*=left])::before{left:var(--callout-arrow-size)}:host([arrow*=center])::before{left:calc(50% - var(--callout-arrow-size)/ 2)}:host([arrow*=right])::before{right:var(--callout-arrow-size)}</style><content></content> </template> <script>!function(){"use strict";var e={};e.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var t=simpla._constants.easings,n={frames:[{transform:"scale(0.95, 0.8)",opacity:0},{transform:"scale(1, 1)",opacity:1}],opts:{"in":{easing:t.easeOutCubic,fill:"both",duration:60},out:{easing:t.easeOutCubic,fill:"both",duration:90}}},i={properties:{active:{type:Boolean,observer:"_activeChanged",notify:!0},_opened:Boolean,noCloseOnClick:Boolean,noCloseOnEscape:Boolean},toggle:function(){this.active=!this._active},_activeChanged:function(e){e?this._showCallout():this._hideCallout()},_showCallout:function(){var e=this,t=void 0;this.toggleAttribute("visible",!0,this),t=this.animate(n.frames,n.opts["in"]),t.onfinish=function(){return e._opened=!0}},_hideCallout:function(){var e=this,t=void 0;t=this.animate(n.frames.slice().reverse(),n.opts.out),t.onfinish=function(){e.toggleAttribute("visible",!1,e),e._opened=!1}},_closeOnEsc:function(){var e=this;document.addEventListener("keyup",function(t){e.noCloseOnEscape||27!==t.keyCode||(e.active=!1)})},_closeOnClick:function(){var e=this;document.addEventListener("click",function(t){!e.noCloseOnClick&&e._opened&&t.target!==e&&(e.active=!1)})},attached:function(){this._closeOnEsc(),this._closeOnClick()}},o=function(){function t(){e.classCallCheck(this,t)}return e.createClass(t,[{key:"beforeRegister",value:function(){this.is="sm-ui-callout",this.properties={arrow:{type:String,reflectToAttribute:!0}}}},{key:"_setTransformOrigin",value:function(){var e=this,t=["transform-origin","webkit-transform-origin"];t.forEach(function(t){return e.style[t]=e.arrow})}},{key:"attached",value:function(){this._setTransformOrigin()}},{key:"behaviors",get:function(){return[i]}}]),t}();Polymer(o)}();</script></dom-module>